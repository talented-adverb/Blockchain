{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pratham/Desktop/BlockChain_Project/Croud-funding-starter-file-main/Croud-funding-starter-file-main/pages/index.js"],"sourcesContent":["import React, { useEffect, useContext, useState } from \"react\";\n\n// INTERNAL IMPORT\nimport { CrowdFundingContext } from \"../Context/CrowdFunding\"; // Corrected spelling based on context\nimport { Hero, Card, PupUp, Toast } from \"../Components\";\n\nconst index = () => {\n  // 1. EXTRACT DATA FROM CONTEXT (CrowdFundingContext)\n  const {\n    titleData,\n    createCampaign,\n    donate,\n    getUserCampaigns,\n    getDonations,\n    getCampaigns: getCampaignsData, // Renamed for clarity in useEffect\n    // getCampaigns is missing from context images but is used as getCampaignsData\n    // in useEffect, assuming 'getCampaigns' was exported as 'getCampaigns' or\n    // we should use the one extracted on line 9 (getCampaign) which is now renamed\n    getCampaigns: getCampaignsContextFunction, // Assuming a function for all campaigns\n  } = useContext(CrowdFundingContext);\n\n  // 2. STATE MANAGEMENT FOR CAMPAIGN DATA AND UI\n  const [allcampaign, setAllcampaign] = useState();\n  const [usercampaign, setUsercampaign] = useState();\n  const [loading, setLoading] = useState(true);\n\n  // Toast notifications\n  const [toast, setToast] = useState(null);\n\n  const showToast = (message, type = 'info') => {\n    setToast({ message, type });\n    setTimeout(() => setToast(null), 4000);\n  };\n\n  // DONATE POPUP MODEL STATE\n  const [openModel, setOpenModel] = useState(false);\n  const [donateCampaign, setDonateCampaign] = useState(); // Holds the campaign object for donation\n\n  // 3. EFFECT TO FETCH CAMPAIGN DATA ON MOUNT\n  useEffect(() => {\n    const fetchData = async () => {\n      setLoading(true);\n      try {\n        const allData = await getCampaignsContextFunction();\n        const userData = await getUserCampaigns();\n\n        setAllcampaign(allData);\n        setUsercampaign(userData);\n      } catch (error) {\n        console.error(\"Failed to fetch campaigns:\", error);\n        // Optionally set empty arrays or show error message\n        setAllcampaign([]);\n        setUsercampaign([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [getCampaignsContextFunction, getUserCampaigns]); // Include dependencies\n\n  // Optional: Console log to verify state (based on image f15371.png)\n  // console.log(donateCampaign); \n\n  // 4. COMPONENT RENDER\n  return (\n    <>\n      <Hero titleData={titleData} createCampaign={createCampaign} showToast={showToast} />\n\n      {/* Card for All Listed Campaigns */}\n      <Card\n        title=\"All Listed Campaign\"\n        allcampaign={allcampaign}\n        loading={loading}\n        showToast={showToast}\n        setOpenModel={setOpenModel} // Passed to open the donation model\n        setDonate={setDonateCampaign} // Passed to set the campaign object to be donated to\n      />\n\n      {/* Card for User's Created Campaigns */}\n      <Card\n        title=\"Your Created Campaign\"\n        allcampaign={usercampaign}\n        loading={loading}\n        showToast={showToast}\n        setOpenModel={setOpenModel} // Passed to open the donation model\n        setDonate={setDonateCampaign} // Passed to set the campaign object to be donated to\n      />\n\n      {/* Conditional Popup Model for Donation */}\n      {openModel && donateCampaign && (\n        <PupUp\n          setOpenModel={setOpenModel} // To close the model\n          getDonations={getDonations} // To fetch current donations for the campaign\n          donate={donateCampaign} // The campaign object being donated to\n          donateFunction={donate} // The function to execute the donation transaction\n          showToast={showToast}\n        />\n      )}\n\n      {/* Toast Notifications */}\n      {toast && (\n        <Toast\n          message={toast.message}\n          type={toast.type}\n          onClose={() => setToast(null)}\n        />\n      )}\n    </>\n  );\n};\n\nexport default index;"],"names":[],"mappings":";;;;;AAAA;AAEA,kBAAkB;AAClB,uRAA+D,sCAAsC;AACrG;AAAA;AAAA;AAAA;AAAA;;;;;AAEA,MAAM,QAAQ;IACZ,qDAAqD;IACrD,MAAM,EACJ,SAAS,EACT,cAAc,EACd,MAAM,EACN,gBAAgB,EAChB,YAAY,EACZ,cAAc,gBAAgB,EAC9B,8EAA8E;IAC9E,0EAA0E;IAC1E,+EAA+E;IAC/E,cAAc,2BAA2B,EAC1C,GAAG,IAAA,iHAAU,EAAC,sLAAmB;IAElC,+CAA+C;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,+GAAQ;IAC9C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,+GAAQ;IAChD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IAEvC,sBAAsB;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;IAEnC,MAAM,YAAY,CAAC,SAAS,OAAO,MAAM;QACvC,SAAS;YAAE;YAAS;QAAK;QACzB,WAAW,IAAM,SAAS,OAAO;IACnC;IAEA,2BAA2B;IAC3B,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,+GAAQ,EAAC;IAC3C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,+GAAQ,KAAI,yCAAyC;IAEjG,4CAA4C;IAC5C,IAAA,gHAAS,EAAC;QACR,MAAM,YAAY;YAChB,WAAW;YACX,IAAI;gBACF,MAAM,UAAU,MAAM;gBACtB,MAAM,WAAW,MAAM;gBAEvB,eAAe;gBACf,gBAAgB;YAClB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,8BAA8B;gBAC5C,oDAAoD;gBACpD,eAAe,EAAE;gBACjB,gBAAgB,EAAE;YACpB,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC;QAA6B;KAAiB,GAAG,uBAAuB;IAE5E,oEAAoE;IACpE,gCAAgC;IAEhC,sBAAsB;IACtB,qBACE;;0BACE,qKAAC,sMAAI;gBAAC,WAAW;gBAAW,gBAAgB;gBAAgB,WAAW;;;;;;0BAGvE,qKAAC,sMAAI;gBACH,OAAM;gBACN,aAAa;gBACb,SAAS;gBACT,WAAW;gBACX,cAAc;gBACd,WAAW;;;;;;0BAIb,qKAAC,sMAAI;gBACH,OAAM;gBACN,aAAa;gBACb,SAAS;gBACT,WAAW;gBACX,cAAc;gBACd,WAAW;;;;;;YAIZ,aAAa,gCACZ,qKAAC,yMAAK;gBACJ,cAAc;gBACd,cAAc;gBACd,QAAQ;gBACR,gBAAgB;gBAChB,WAAW;;;;;;YAKd,uBACC,qKAAC,oKAAK;gBACJ,SAAS,MAAM,OAAO;gBACtB,MAAM,MAAM,IAAI;gBAChB,SAAS,IAAM,SAAS;;;;;;;;AAKlC;uCAEe"}}]
}